type:
  name: std::shared_ptr<Controller>
  include: "src/control/controller.h"

---

type:
  name: cp::Vect
  include: "chipmunk.hpp"

---

component:
  name: ShipControl
  members:
    - controller: std::shared_ptr<Controller>

---

component:
  name: Observer
  members:
  - reward: float

---

component:
  name: WeaponControl

---

component:
  name: Goal
  members:
    - position: cp::Vect

---

message:
  name: FireWeapon

---

message:
  name: ReachedGoal

---

system:
  name: Control
  families:
  - main:
    - ShipControl: read
    - Hardpoints: read
    - Body: write
    - Transform2D: write
    - Observer: optional write
    - Detector: read
    - Health: read
    - Goal: read
  strategy: individual
  services:
    - ControllerService
  messages:
    - FireWeapon: send
    - ReachedGoal: receive
  access:
  - api

---

system:
  name: WeaponControl
  families:
    - main:
      - Weapon: read
      - Transform2D: write
  strategy: individual
  messages:
    - FireWeapon: receive
  access:
    - world
    - resources